syntax = "proto3";

option go_package = "go/mindbox";

package mindbox;

service User {
    rpc Info (ParamsUser) returns (ResponseUser) {
    }
    rpc Orders (ParamsOrders) returns (ResponseOrders) {
    }
}

service Mobile {
    rpc Creation(ParamsCreation) returns (ResponseCreation) {
    }
    rpc Authorization (ParamsAuthorization) returns (ResponseAuthorization) {
    }
    rpc Registration (ParamsRegistration) returns (ResponseRegistration) {
    }
    rpc Code (ParamsCode) returns (ResponseCode) {
    }
    rpc CheckCode (ParamsCheckCode) returns (ResponseCheckCode) {
    }
    rpc EditUser (ParamsEditUser) returns (ResponseEditUser) {
    }
}

message PingResponse {
    string response = 1;
}

message ParamsUser {
    string client_id = 1;
}
message ResponseUser {
    string first_name = 1;
    string last_name = 2;
    string email = 3;
    string phone = 4;
    int32 bonus_total = 5;
    int32 bonus_available = 6;
    int32 bonus_blocked = 7;
    double total_paid_amount = 8;
}

message ParamsOrders {
    string client_id = 1;
}
message ResponseOrders {
    int32 total = 1;
    repeated Order result = 2;
}
message Order {
    string id = 1;
    string created_date = 2;
    string payment_type = 3;
    double discounted_total_price = 4;
    double payment_amount = 5;
    double applied_discount = 6;
    double acquired_balance_change = 7;
}

message ParamsAuthorization {
    string endpoint = 1;
    string device_uuid = 2;
}
message ResponseAuthorization {
    bool ok = 1;
}

message ParamsRegistration {
    string endpoint = 1;
    string device_uuid = 2;
    string client_id = 3;
    string email = 4;
    string full_name = 5;
    string mobile_phone = 6;
}
message ResponseRegistration {
    bool ok = 1;
}

message ParamsCode {
    string endpoint = 1;
    string mobile_phone = 2;
}
message ResponseCode {
    bool ok = 1;
}

message ParamsCheckCode {
    string endpoint = 1;
    string mobile_phone = 2;
    string code = 3;
}
message ResponseCheckCode {
    bool ok = 1;
    string status = 2;
    string client_id = 3;
    int64 mindbox_id = 4;
}

message  ParamsCreation {
    string endpoint = 1;
    string device_uuid = 2;
    string id = 3;
    string vendor = 4;
    string model = 5;
}

message ResponseCreation {
    bool ok = 1;
}

message ParamsEditUser {
    string endpoint = 1;
    string device_uuid = 2;
    string client_id = 3;
    string mobile_phone = 4;
}

message ResponseEditUser {
    bool ok = 1;
}